[pytest]
minversion = 8.0
testpaths = tests
pythonpath = src
norecursedirs =
  .venv
  .tox
  .pytest_cache
  .ruff_cache
  .mypy_cache
  .hypothesis
  .benchmarks
  build
  dist
  docs
  artifacts

cache_dir = artifacts/test/.pytest_cache

asyncio_mode = auto
timeout = 120
timeout_method = thread
timeout_func_only = true

addopts =
  -ra
  --strict-markers
  --tb=short
  --cov=bijux_rag
  --cov-branch
  --cov-config=config/coveragerc.ini
  --cov-report=term-missing:skip-covered
  --cov-report=html:artifacts/test/htmlcov
  --cov-report=xml:artifacts/test/coverage.xml

xfail_strict = true

markers =
  e2e: end-to-end tests
  slow: mark test as slow

filterwarnings =
  ignore:jsonschema\.exceptions\.RefResolutionError is deprecated:DeprecationWarning:schemathesis.generation.coverage
